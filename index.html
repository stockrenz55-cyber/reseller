<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Reseller Panel</title>
<style>
body {
  margin:0;
  font-family:Arial;
  background:url("https://images.unsplash.com/photo-1518770660439-4636190af475") no-repeat center/cover;
  color:#0ff;
}
.box {
  backdrop-filter: blur(10px);
  background: rgba(0,0,0,.6);
  padding:20px;
  border-radius:15px;
  box-shadow:0 0 20px #0ff;
  margin:20px auto;
  width:350px;
}
button {
  width:100%;
  padding:10px;
  margin-top:10px;
  background:transparent;
  border:2px solid #0ff;
  color:#0ff;
  box-shadow:0 0 10px #0ff;
  cursor:pointer;
}
#panel { display:none; }
#log { height:200px; overflow:auto; font-size:12px; }
</style>
</head>

<body>

<div class="box" id="login">
  <h2>LOGIN</h2>
  <input id="u" placeholder="Username"><br>
  <input id="p" type="password" placeholder="Password"><br>
  <button onclick="login()">LOGIN</button>
</div>

<div class="box" id="panel">
  <h2>PANEL</h2>
  <button onclick="create()">CREATE PANEL</button>
  <h3>LOG</h3>
  <pre id="log"></pre>
</div>

<script>
let token = "";
const device = navigator.userAgent;

function log(msg){
  document.getElementById("log").textContent =
    msg + "\n" + document.getElementById("log").textContent;
}

async function login(){
  const r = await fetch("/login",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({
      username:u.value,
      password:p.value,
      device
    })
  });
  const d = await r.json();
  if(d.error) return alert(d.error);
  token = d.token;
  login.style.display="none";
  panel.style.display="block";
  loadLogs();
}

async function create(){
  const r = await fetch("/create-panel",{
    method:"POST",
    headers:{ Authorization:token }
  });
  const d = await r.json();
  if(d.error) alert(d.error);
  loadLogs();
}

async function loadLogs(){
  const r = await fetch("/logs",{ headers:{ Authorization:token }});
  const d = await r.json();
  log(d.join("\n"));
}
</script>

</body>
</html>
